<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="../node_modules/handsontable/dist/handsontable.min.css">
	<script src="../node_modules/handsontable/dist/handsontable.js"></script>
	<script src="../node_modules/papaparse/papaparse.min.js"></script>

	<link rel="stylesheet" href="../node_modules/@fortawesome/fontawesome-free/css/all.min.css">

	<link rel="stylesheet" href="../node_modules/bulma/css/bulma.min.css">
	<link rel="stylesheet" href="../node_modules/bulma-extensions/dist/css/bulma-extensions.min.css">
	<link rel="stylesheet" href="./main.css">
	<link rel="stylesheet" href="./dark.css">
	<link rel="stylesheet" href="./light.css">
	<link rel="stylesheet" href="./high_contrast.css">
</head>
<body class="vscode-light"> 

	<div class="page full-h">

	<div class="all-options">

			<div class="options-bar">
				<div>
						<div  class="options-title clickable" onclick="toggleReadOptions()">Read options <i id="read-options-icon" class="fas fa-chevron-right"></i></div>
				</div>

				<div id="read-options-content" class="options-content">
					<div>

							<div class="field">
									<input id="has-header" type="checkbox" name="has-header" class="switch is-rounded" checked="checked" onchange="setHasHeader()">
									<label for="has-header">
										<span>Has header</span>
										<span class="tooltip is-tooltip-right is-tooltip-multiline" data-tooltip="The first row is used as header. Note that changing this option will also change the write header option.">
												<i class="fas fa-question-circle"></i>
										</span>
									</label>
								</div>

						<!-- this makes the row data invalid if we have more than 1 col-->
						<!-- <div class="field">
								<input id="skip-empty-lines" type="checkbox" name="skip-empty-lines" class="switch is-rounded" checked="checked" onchange="setSkipEmptyLines()" disabled>
								<label for="skip-empty-lines">
									<span>Skip empty lines</span>
									<span class="tooltip is-tooltip-multiline" data-tooltip="If enabled empty lines will be used as row. Disabled because empty rows are invalid if we have more than 1 column.">
											<i class="fas fa-question-circle"></i>
									</span>
								</label>
						</div> -->

						<div class="flexed">
								<div class="field">
									<label>
										<span>Delimiter</span>
										<span class="clickable tooltip" data-tooltip="Set to tab character"  onclick="setReadDelimiter('\t')">⇥</span>
										<span class="tooltip" data-tooltip="Empty to auto detect">
												<i class="fas fa-question-circle"></i>
										</span>
									</label> 
									<input id="delimiter-string" class="input" type="text" placeholder="auto" oninput="setDelimiterString()">
								</div>
						
								<div class="field mar-left">
										<label>
											<span>Comment</span>
											<span class="tooltip is-tooltip-multiline" data-tooltip="Comments before and after csv data are preserved. Comments between data rows are ignored.">
													<i class="fas fa-question-circle"></i>
											</span>
										</label>
										<input id="comment-string" class="input" type="text" placeholder="Empty for no comments" oninput="setCommentString()">
								</div>
						</div>
					

						<button class="button is-light" onclick="readDataAgain(t1, csvReadOptions)">
							<span>Read again</span>
							<span class="tooltip  mar-left-half is-tooltip-multiline is-tooltip-right" data-tooltip="The input file content is saved locally and read again. Thus this view is independent of the source file">
									<i class="fas fa-question-circle"></i>
							</span>
						</button>
						
					</div>
				</div>
		</div>
		
		<div class="options-bar">
				<div>
						<div  class="options-title clickable" onclick="toggleWriteOptions()">Write options <i id="write-options-icon" class="fas fa-chevron-right"></i></div>
				</div>

				<div id="write-options-content" class="options-content">
						<div class="field">
							<input id="has-header-write" type="checkbox" name="has-header-write" class="switch is-rounded" checked="checked" onchange="setHasHeaderWrite()">
							<label for="has-header-write">
								<span>Write header</span>
								<span class="tooltip is-tooltip-bottom" data-tooltip="Checked: writes the header row, unchecked: not">
										<i class="fas fa-question-circle"></i>
								</span>
							</label>
						</div>
				
						<div class="flexed">
								<div class="field">
										<label for="delimiter-string-write">
												<label>
														<span>Delimiter</span>
														<span class="clickable tooltip" data-tooltip="Set to tab character" onclick="setWriteDelimiter('\t')">⇥</span>
														<span class="tooltip" data-tooltip="Empty to use delimiter from read">
																<i class="fas fa-question-circle"></i>
														</span>
													</label> 
										</label>
										<input id="delimiter-string-write" class="input" type="text" placeholder="auto" oninput="setDelimiterStringWrite()">
									</div>
							
									<div class="field mar-left">
											<label for="comment-string-write">
													<label>
															<span>Comment</span>
															<span class="tooltip is-tooltip-multiline" data-tooltip="Empty for no comments. Comments before and after csv data are written if char is present">
																	<i class="fas fa-question-circle"></i>
															</span>
														</label>
											</label>
											<input id="comment-string-write" class="input" type="text" placeholder="Empty for no comments" oninput="setCommentStringWrite()">
									</div>
						</div>
				
						<div class="field">
								<label for="comment-string-write">NewLine</label> 
								<div class="select">
										<select id="newline-select-write" onchange="setNewLineWrite()">
											<option value="">Same as input</option>
											<option value="crlf">Windows (CRLF)</option>
											<option value="lf">Linux/Mac (LF)</option>
										</select>
								</div>
						</div>
				</div>
		</div>

		<div class="options-bar" style="flex: 1%;">
			<div>
					<div  class="options-title clickable" onclick="togglePreview()">Preview <i id="preview-icon" class="fas fa-chevron-right"></i></div>
			</div>

			<div id="preview-content" class="options-content">
				<button class="button is-light mar-bot" onclick="generateCsvPreview()">Generate</button>
				<textarea id="csv-preview" class="textarea preview-csv-textarea"></textarea>
			</div>

		</div>
	</div>
	
	<div class="table-action-buttons">
		<button class="button is-white is-outlined is-small" onclick="addRow()">
			<span class="icon is-small">
					<i class="fas fa-plus"></i>
				</span>
			<span>Add row</span>
		</button>

		<button class="button is-white is-outlined is-small" onclick="addColumn()">
			<span class="icon is-small">
					<i class="fas fa-plus"></i>
				</span>
			<span>Add column</span>
		</button>

		<button class="button is-white is-outlined is-small" onclick="toggleHelpModal(true)">
			<span class="icon is-small">
					<i class="fas fa-question"></i>
				</span>
			<span>Help</span>
		</button>
	</div>

	<div id="csv-editor-wrapper" class="csv-editor-wrapper">
		<div id="csv-editor"></div>
	</div>
	
</div>

<div id="help-modal" class="modal help-modal">
  <div class="modal-background"></div>
  <div class="modal-content">
		<div class="box">
			
			<h3 class="title is-3">Features/Shortcuts</h3>
			<div class="content">
					<ul>
						<li>Undo/Redo</li>
						<li>Click on column header text to sort</li>
						<li>Click row/column header (not the text) to select then drag to rearrange</li>
						<li>Resize row/column</li>
						<li><div class="keys">Home</div> to move to the first cell in a row</li>
						<li><div class="keys">End</div> to move to the last cell in a row</li>

						<li><div class="keys">Ctrl</div>+<div class="keys">Home</div> to move to the first cell in a column</li>
						<li><div class="keys">Ctrl</div>+<div class="keys">End</div> to move to the last cell in a column</li>
						<li><div class="keys">Esc</div> to cancel editing and close cell editor</li>
						<li><div class="keys">Ctrl</div>+<div class="keys">Enter</div> to add a line break</li>

						<li>To delete a row/column hover over it and click the trash-icon</li>

					</ul>

					For a full list of shortcuts see <a target="_blank" href="https://handsontable.com/docs/6.2.2/tutorial-keyboard-navigation.html">https://handsontable.com/docs/6.2.2/tutorial-keyboard-navigation.html</a>
			</div>

			<h3 class="title is-3">Hints</h3>
			<div class="content">
					<ul>
							<li>Sorting state is exported</li>
						<li>Copy & Past use tab (<div class="keys">⇥</div>) as separator (same as excel)</li>
					</ul>
			</div>
				

		</div>
  </div>
  <button class="modal-close is-large" aria-label="close" onclick="toggleHelpModal()"></button>
</div>

 <script src="io.js"></script>
 <script src="ui.js"></script>
 <script src="util.js"></script>
	<script src="main.js"></script>
</body>
</html>